parameters:
  TaskctlVersion: 1.5.2

steps:
#  # Checkout self repo
#  - checkout: self
#    fetchDepth: 0
#    persistCredentials: true
#
#  - script: |
#      echo "Switching to source branch: $(System.PullRequest.SourceBranch)"
#      git checkout $(System.PullRequest.SourceBranch)
#      git log -1
#    displayName: "Checkout PR source branch"

  # Install Taskfile so that the tests can be run
  - task: Bash@3
    displayName: "Install: Taskctl"
    inputs:
      targetType: inline
      script: |
        sudo wget https://github.com/Ensono/taskctl/releases/download/v${{ parameters.TaskctlVersion }}/taskctl_${{ parameters.TaskctlVersion }}_linux_amd64.tar.gz -O /tmp/taskctl.tar.gz
        sudo tar zxf /tmp/taskctl.tar.gz -C /usr/local/bin taskctl
